---
layout: post
title: yumç¬”è®°
date: 2025-12-10 09:00:00 +0800
category: ç¬”è®°
thumbnail: /style/image/thumbnail.png
icon: note
typora-copy-images-to: ..\style\image
---

* ç›®å½•
{:toc}
# YUM è½¯ä»¶åŒ…ç®¡ç†å™¨ä½¿ç”¨æŒ‡å—

YUMï¼ˆYellowdog Updater Modifiedï¼‰æ˜¯åŸºäº RPM çš„é«˜çº§åŒ…ç®¡ç†å·¥å…·ï¼Œå¹¿æ³›ç”¨äº CentOSã€RHEL å’Œ Fedora ç­‰ Linux å‘è¡Œç‰ˆã€‚å®ƒèƒ½è‡ªåŠ¨ä¸‹è½½ã€å®‰è£…è½¯ä»¶åŒ…ï¼Œå¹¶æ™ºèƒ½å¤„ç†ä¾èµ–å…³ç³»ï¼Œæå¤§ç®€åŒ–äº†ç³»ç»Ÿç»´æŠ¤å·¥ä½œã€‚

---

## ä¸€ã€YUM æ˜¯ä»€ä¹ˆï¼Ÿ

YUM æ˜¯ä¸€ä¸ª **Shell å‰ç«¯è½¯ä»¶åŒ…ç®¡ç†å™¨**ï¼Œä¸»è¦ç‰¹ç‚¹åŒ…æ‹¬ï¼š

- åŸºäº **RPM åŒ…ç®¡ç†ç³»ç»Ÿ**
- èƒ½ä»æŒ‡å®šçš„è½¯ä»¶ä»“åº“ï¼ˆRepositoryï¼‰**è‡ªåŠ¨ä¸‹è½½å¹¶å®‰è£… RPM åŒ…**
- **è‡ªåŠ¨è§£æå¹¶å®‰è£…ä¾èµ–é¡¹**ï¼Œé¿å…â€œä¾èµ–åœ°ç‹±â€
- æ”¯æŒ **ä¸€é”®å®‰è£…æ•´ä¸ªè½¯ä»¶ç»„**ï¼ˆå¦‚ GNOME æ¡Œé¢ã€å¼€å‘å·¥å…·ç­‰ï¼‰

---

## äºŒã€é…ç½®å›½å†… YUM æºï¼ˆä»¥é˜¿é‡Œäº‘ä¸ºä¾‹ï¼‰

é»˜è®¤ YUM æºä½äºå›½å¤–ï¼Œé€Ÿåº¦è¾ƒæ…¢ã€‚å»ºè®®æ›¿æ¢ä¸ºå›½å†…é•œåƒï¼ˆå¦‚é˜¿é‡Œäº‘ã€163ã€æ¸…åæºï¼‰ã€‚

### 1. å¤‡ä»½åŸé…ç½®
```bash
sudo mv /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.backup
```

### 2. ä¸‹è½½æ–°çš„ repo æ–‡ä»¶ï¼ˆä»¥ CentOS 7 ä¸ºä¾‹ï¼‰
```bash
sudo wget -O /etc/yum.repos.d/CentOS-Base.repo https://mirrors.aliyun.com/repo/Centos-7.repo
```

> ğŸ”” æ³¨æ„ï¼š  
> - CentOS 8 ç”¨æˆ·åº”ä½¿ç”¨ `Centos-8.repo`  
> - è‹¥ä¸ºå…¶ä»–ç‰ˆæœ¬ï¼Œè¯·æ›¿æ¢ URL ä¸­çš„ç‰ˆæœ¬å·  
> - `-O` æŒ‡å®šä¿å­˜æ–‡ä»¶åï¼Œ `-P` æŒ‡å®šç›®å½•

### 3. ç”Ÿæˆ YUM ç¼“å­˜
```bash
sudo yum makecache
```

### 4. ï¼ˆå¯é€‰ï¼‰æ›´æ–°ç³»ç»Ÿ
```bash
sudo yum -y update
```

> âš ï¸ å»ºè®®åœ¨ç”Ÿäº§ç¯å¢ƒè°¨æ…æ‰§è¡Œ `yum update`ï¼Œé¿å…æ„å¤–å‡çº§æ ¸å¿ƒç»„ä»¶ã€‚

---

## ä¸‰ã€YUM å¸¸ç”¨å‘½ä»¤é€ŸæŸ¥

### 1. å®‰è£…è½¯ä»¶
| å‘½ä»¤                            | è¯´æ˜                                   |
| ------------------------------- | -------------------------------------- |
| `yum install package1`          | å®‰è£…æŒ‡å®šåŒ…                             |
| `yum install -y package1`       | è‡ªåŠ¨ç¡®è®¤å®‰è£…ï¼ˆæ— éœ€äº¤äº’ï¼‰               |
| `yum groupinstall "Group Name"` | å®‰è£…è½¯ä»¶ç»„ï¼ˆå¦‚ `"Development Tools"`ï¼‰ |
| `yum install *`                 | å®‰è£…æ‰€æœ‰å¯ç”¨åŒ…ï¼ˆ**æåº¦ä¸æ¨è**ï¼‰       |

### 2. æ›´æ–°ä¸å‡çº§
| å‘½ä»¤                           | è¯´æ˜                   |
| ------------------------------ | ---------------------- |
| `yum check-update`             | æ£€æŸ¥æ˜¯å¦æœ‰å¯æ›´æ–°çš„åŒ…   |
| `yum update`                   | æ›´æ–°æ‰€æœ‰å·²å®‰è£…çš„åŒ…     |
| `yum update package1`          | æ›´æ–°æŒ‡å®šåŒ…             |
| `yum upgrade package1`         | å‡çº§åŒ…ï¼ˆä¸åˆ é™¤æ—§é…ç½®ï¼‰ |
| `yum groupupdate "Group Name"` | æ›´æ–°è½¯ä»¶ç»„             |

### 3. æŸ¥è¯¢ä¸æ˜¾ç¤º
| å‘½ä»¤                         | è¯´æ˜                                   |
| ---------------------------- | -------------------------------------- |
| `yum search keyword`         | æŒ‰å…³é”®è¯æœç´¢è½¯ä»¶åŒ…                     |
| `yum list`                   | åˆ—å‡ºæ‰€æœ‰å¯å®‰è£…/å·²å®‰è£…çš„åŒ…              |
| `yum list installed`         | ä»…åˆ—å‡ºå·²å®‰è£…åŒ…                         |
| `yum list | grep vim`        | è¿‡æ»¤æŸ¥æ‰¾ç‰¹å®šåŒ…                         |
| `yum info package1`          | æŸ¥çœ‹åŒ…çš„è¯¦ç»†ä¿¡æ¯ï¼ˆç‰ˆæœ¬ã€æè¿°ã€å¤§å°ç­‰ï¼‰ |
| `yum groupinfo "Group Name"` | æŸ¥çœ‹è½¯ä»¶ç»„åŒ…å«å“ªäº›åŒ…                   |

### 4. åˆ é™¤è½¯ä»¶
| å‘½ä»¤                                          | è¯´æ˜                       |
| --------------------------------------------- | -------------------------- |
| `yum remove package1` æˆ– `yum erase package1` | å¸è½½æŒ‡å®šåŒ…ï¼ˆè‡ªåŠ¨å¤„ç†ä¾èµ–ï¼‰ |
| `yum groupremove "Group Name"`                | å¸è½½æ•´ä¸ªè½¯ä»¶ç»„             |
| `yum deplist package1`                        | æŸ¥çœ‹æŸåŒ…çš„ä¾èµ–å…³ç³»         |

### 5. æ¸…ç†ç¼“å­˜
| å‘½ä»¤                 | è¯´æ˜                                                 |
| -------------------- | ---------------------------------------------------- |
| `yum clean packages` | æ¸…é™¤å·²ä¸‹è½½çš„ RPM åŒ…                                  |
| `yum clean headers`  | æ¸…é™¤å¤´æ–‡ä»¶ç¼“å­˜                                       |
| `yum clean all`      | æ¸…é™¤æ‰€æœ‰ç¼“å­˜ï¼ˆç­‰ä»·äº `clean packages + oldheaders`ï¼‰ |

### 6. ä»…ä¸‹è½½ RPM åŒ…ï¼ˆä¸å®‰è£…ï¼‰
```bash
yum install --downloadonly --downloaddir=/home/test gcc
```
> æ­¤å‘½ä»¤ä¼šå°† `gcc` åŠå…¶æ‰€æœ‰ä¾èµ–çš„ RPM åŒ…ä¸‹è½½åˆ° `/home/test` ç›®å½•ï¼Œä¾¿äºç¦»çº¿å®‰è£…æˆ–åˆ†å‘ã€‚

---

## å››ã€è¡¥å……ï¼šä½¿ç”¨ RPM æ‰‹åŠ¨å®‰è£…ï¼ˆä¸æ¨èå¸¸è§„ä½¿ç”¨ï¼‰

è‹¥å·²ä¸‹è½½ RPM åŒ…ï¼Œå¯ä½¿ç”¨ `rpm` å‘½ä»¤å®‰è£…ï¼Œä½†**æ— æ³•è‡ªåŠ¨å¤„ç†ä¾èµ–**ï¼š

```bash
rpm -Uvh *.rpm --nodeps --force
```

- `-Uvh`ï¼šå‡çº§å¹¶æ˜¾ç¤ºè¿›åº¦  
- `--nodeps`ï¼šå¿½ç•¥ä¾èµ–æ£€æŸ¥ï¼ˆå±é™©ï¼å¯èƒ½å¯¼è‡´ç³»ç»Ÿå¼‚å¸¸ï¼‰  
- `--force`ï¼šå¼ºåˆ¶è¦†ç›–æ–‡ä»¶

> ğŸš« **å¼ºçƒˆå»ºè®®ä¼˜å…ˆä½¿ç”¨ `yum localinstall *.rpm`**ï¼Œå®ƒèƒ½è‡ªåŠ¨è§£å†³ä¾èµ–ã€‚

---

## äº”ã€å°ç»“

YUM æ˜¯ Linux ç³»ç»Ÿç®¡ç†çš„æ ¸å¿ƒå·¥å…·ä¹‹ä¸€ã€‚æŒæ¡å…¶åŸºæœ¬ç”¨æ³•ï¼Œå¯é«˜æ•ˆå®Œæˆè½¯ä»¶å®‰è£…ã€æ›´æ–°ã€æŸ¥è¯¢ä¸æ¸…ç†ã€‚åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œå»ºè®®ï¼š

- ä½¿ç”¨**å›½å†…é•œåƒæº**æå‡ä¸‹è½½é€Ÿåº¦  
- é¿å…ç›²ç›® `yum update`  
- ä¼˜å…ˆç”¨ `yum` è€Œé `rpm --nodeps` å®‰è£…è½¯ä»¶

---

> ğŸ’¡ è¿›é˜¶æç¤ºï¼š  
> - CentOS 8+ å’Œ RHEL 8+ å·²é€æ­¥è½¬å‘ **DNF**ï¼ˆYUM v4ï¼‰ï¼Œå‘½ä»¤åŸºæœ¬å…¼å®¹  
> - å¯ç»“åˆ `yum history` æŸ¥çœ‹æ“ä½œè®°å½•ï¼Œæ”¯æŒå›æ»šï¼ˆ`yum history undo ID`ï¼‰
