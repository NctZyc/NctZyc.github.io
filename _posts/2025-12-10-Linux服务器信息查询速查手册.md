---
layout: post
title: Linux服务器信息查询速查手册.md
date: 2025-12-10 09:00:00 +0800
category: 笔记
thumbnail: /style/image/thumbnail.png
icon: note
typora-copy-images-to: ..\style\image
---

* 目录
{:toc}
# Linux 服务器信息查询速查手册

在日常运维、故障排查或环境检查中，快速获取服务器软硬件及运行状态信息至关重要。本文整理了常用命令，涵盖系统、CPU、内存、磁盘、网络、进程等多个维度。

---

## 一、系统基本信息

| 信息类型            | 命令                                          | 说明                                              |
| ------------------- | --------------------------------------------- | ------------------------------------------------- |
| 内核版本            | `uname -a`                                    | 显示内核版本、主机名、架构等                      |
| 操作系统版本        | `cat /etc/issue` 或 `cat /etc/redhat-release` | 查看发行版信息（适用于 CentOS/RHEL）              |
| 主机名              | `hostname`                                    | 显示当前服务器名称                                |
| 系统运行时间 & 负载 | `uptime`                                      | 显示系统运行时长、当前用户数、1/5/15 分钟平均负载 |

---

## 二、CPU 信息

> 所有 CPU 信息均来自 `/proc/cpuinfo`

| 查询目标                             | 命令                                                         | 说明                           |
| ------------------------------------ | ------------------------------------------------------------ | ------------------------------ |
| CPU 详细信息                         | `cat /proc/cpuinfo`                                          | 包含型号、主频、缓存、核心数等 |
| 物理 CPU 个数                        | `cat /proc/cpuinfo \| grep "physical id" \| sort \| uniq \| wc -l` |                                |
| 每个物理 CPU 的核心数                | `cat /proc/cpuinfo \| grep "cpu cores" \| uniq`              |                                |
| 逻辑 CPU 总数                        | `cat /proc/cpuinfo \| grep "processor" \| wc -l`             |                                |
| 每个物理 CPU 的逻辑 CPU 数（超线程） | `cat /proc/cpuinfo \| grep 'siblings' \| uniq`               |                                |
| 架构位数（32/64）                    | `getconf LONG_BIT`                                           | 返回 `32` 或 `64`              |

> 💡 **说明**：  
> - **物理 CPU**：实际插在主板上的 CPU 芯片数量  
> - **核心数（cores）**：每个物理 CPU 的计算核心数量  
> - **逻辑 CPU（processor）**：操作系统可见的 CPU 线程数（启用超线程时 = 核心数 × 2）

---

## 三、内存信息

| 命令                          | 说明                                 |
| ----------------------------- | ------------------------------------ |
| `free -h` 或 `free -m`        | 以易读格式（GB/MB）显示内存使用情况  |
| `cat /proc/meminfo`           | 查看详细内存信息（含缓存、缓冲区等） |
| `grep MemTotal /proc/meminfo` | 仅查看物理内存总量                   |

---

## 四、磁盘与文件系统

| 命令                    | 说明                                         |
| ----------------------- | -------------------------------------------- |
| `df -h`                 | 显示各挂载分区的磁盘使用情况（人类可读格式） |
| `lsblk`                 | 列出所有块设备（磁盘、分区）及其层级关系     |
| `du -sh`                | 查看当前目录总大小                           |
| `du -h --max-depth=1 *` | 查看当前目录下各子目录/文件的大小            |

> ⚠️ 注意：`lsblk` 不显示 RAM 盘（tmpfs）等虚拟设备。

---

## 五、网络信息

| 命令                        | 说明                                                        |
| --------------------------- | ----------------------------------------------------------- |
| `ifconfig`                  | 查看网卡 IP、MAC、流量等（需安装 `net-tools`）              |
| `ip a`                      | 现代替代命令（无需额外安装）                                |
| `lsof -i :<port>`           | 查看指定端口是否被占用（如 `lsof -i:80`）                   |
| `grep -w 465 /etc/services` | 通过端口号反查服务名称                                      |
| `iftop -i eth0`             | 实时监控网卡流量（需安装 `iftop`，`eth0` 替换为实际网卡名） |

> 💡 提示：若 `ifconfig` 未找到，可运行 `yum install -y net-tools` 安装。

---

## 六、进程与服务状态

| 场景                  | 命令                                                         | 说明                                  |
| --------------------- | ------------------------------------------------------------ | ------------------------------------- |
| 查找某服务进程        | `ps -ef \| grep <name>`                                      | 如 `ps -ef \| grep nginx`             |
| 统计 Nginx 进程数     | `ps -ef \| grep nginx \| grep -v grep \| wc -l`              | 排除 `grep` 自身                      |
| 统计 MySQL 进程数     | `ps -axef \| grep mysqld -c`                                 | `-c` 表示计数                         |
| 查看 TCP 连接状态分布 | `netstat -n \| awk '/^tcp/ {++S[$NF]} END {for(a in S) print a, S[a]}'` | 如 `ESTABLISHED`、`TIME_WAIT` 数量    |
| 查看日志              | `less /path/to/logfile`                                      | 支持翻页、搜索，比 `cat` 更适合大文件 |

> 🔍 **常见 TCP 状态含义**：
> - `ESTABLISHED`：已建立连接
> - `TIME_WAIT`：主动关闭连接后的等待状态
> - `CLOSE_WAIT`：被动关闭，需检查应用是否未正确释放连接

---

## 七、实用组合建议

- **快速健康检查脚本**（可保存为 `server-check.sh`）：
  ```bash
  echo "=== 系统信息 ==="
  uname -a
  cat /etc/redhat-release 2>/dev/null || cat /etc/os-release
  
  echo -e "\n=== CPU 逻辑核数 ==="
  nproc
  
  echo -e "\n=== 内存使用 ==="
  free -h
  
  echo -e "\n=== 磁盘使用 ==="
  df -h
  
  echo -e "\n=== 当前负载 ==="
  uptime
  ```

---

## 总结

掌握这些命令，可快速完成服务器状态普查、性能瓶颈定位与服务异常排查。建议结合 `cron` 定期采集关键指标，或使用监控工具（如 Zabbix、Prometheus）实现自动化告警。
