---
layout: post
title: node笔记
date: 2025-12-10 09:00:00 +0800
category: 笔记
thumbnail: /style/image/thumbnail.png
icon: note
typora-copy-images-to: ..\style\image
---

* 目录
{:toc}
# Node.js 与 Vue + Electron 开发环境搭建指南

本文将带你从零开始搭建 Node.js 开发环境，并创建一个基于 Vue + Electron 的桌面应用项目。

---

## 一、Node.js 环境配置

### 1. 安装 Node.js
- 访问 [Node.js 官网](https://nodejs.org/) 下载 Windows 安装包（建议选择 LTS 版本）。
- 按照向导完成安装。

### 2. 验证安装
打开终端（CMD 或 PowerShell），执行以下命令验证版本：

```bash
node -v
npm -v
```

### 3. 自定义全局模块和缓存目录
在 Node.js 安装目录下（例如 `D:\software\install\NodeJs`）新建两个文件夹：
- `node_global`：用于存放全局安装的模块
- `node_cache`：用于存放 npm 缓存

然后设置 npm 配置：

```bash
npm config set prefix "D:\software\install\NodeJs\node_global"
npm config set cache "D:\software\install\NodeJs\node_cache"
```

查看当前配置是否生效：

```bash
npm config list
```

### 4. 配置环境变量
将 `D:\software\install\NodeJs\node_global` 添加到系统环境变量 `PATH` 中，以便在任意目录下都能使用全局安装的命令（如 `vue`、`cnpm` 等）。

> **提示**：修改环境变量后需重启终端或重新加载配置。

### 5. 权限设置（可选）
若遇到权限问题（如无法写入子目录），请为 Node.js 安装目录赋予“完全控制”权限：
- 右键文件夹 → 属性 → 安全 → 编辑 → 勾选“完全控制”
- 如仍无效，进入“高级”设置，勾选“替换子容器和对象的所有者”

### 6. 切换为淘宝镜像（加速国内下载）
```bash
npm config set registry https://registry.npm.taobao.org
```

验证是否生效：
```bash
npm config get registry
# 应输出 https://registry.npm.taobao.org/
```

### 7. 安装 cnpm（可选但推荐）
```bash
npm install -g cnpm --registry=https://registry.npm.taobao.org
```

> 若 `cnpm -v` 报错，请尝试以管理员身份运行终端。

### 8. 安装 Vue 相关工具
```bash
npm install -g vue
npm install -g vue-router
npm install -g @vue/cli      # Vue CLI 脚手架（用于创建项目）
```

---

## 二、创建 Vue + Electron 桌面应用

### 方法一：通过 Vue CLI 创建 + 集成 Electron

#### 1. 创建 Vue 项目
```bash
vue create genius_rally
cd genius_rally
```

#### 2. 启动开发服务器（仅 Web）
```bash
npm run serve
```

#### 3. 集成 Electron
为加速 Electron 二进制文件下载，先设置镜像环境变量（Windows PowerShell）：

```powershell
$env:ELECTRON_MIRROR="https://npm.taobao.org/mirrors/electron/"
```

或在命令行中临时指定（CMD）：
```cmd
set ELECTRON_MIRROR=https://npm.taobao.org/mirrors/electron/
```

然后添加 Electron 插件：
```bash
vue add electron-builder
```

#### 4. 启动 Electron 开发模式
```bash
npm run electron:serve
```

#### 5. 构建可执行程序
```bash
npm run electron:build
```
构建产物位于 `dist_electron/` 目录。

---

### 方法二：手动集成 Electron（适用于已有项目）

#### 1. 安装 Electron
```bash
npm install --save-dev electron
```

#### 2. 修改 `package.json`
- 设置主入口文件：
  ```json
  "main": "app/main.js"
  ```
- 修改启动脚本：
  ```json
  "scripts": {
    "start": "electron ."
  }
  ```

#### 3. 创建 `app/main.js`（Electron 主进程）
示例内容：
```js
const { app, BrowserWindow } = require('electron');
const path = require('path');

function createWindow() {
  const win = new BrowserWindow({
    width: 800,
    height: 600,
    webPreferences: {
      nodeIntegration: true,
      contextIsolation: false
    }
  });

  win.loadFile('index.html'); // 或你的 Vue 打包后的 HTML
}

app.whenReady().then(createWindow);

app.on('window-all-closed', () => {
  if (process.platform !== 'darwin') app.quit();
});
```

#### 4. 启动应用
```bash
npm start
```

---

## 三、Vue 基础语法速览

每个 Vue 应用都通过实例化 `Vue` 对象启动：

```js
var vm = new Vue({
  el: '#app',               // 挂载点（绑定到 id="app" 的 DOM 元素）
  data: {
    message: 'Hello Vue!'
  },
  methods: {
    greet: function() {
      alert(this.message);
    }
  }
});
```

### 常用指令

- **`v-bind`**：动态绑定 HTML 属性  
  示例：`<img v-bind:src="imageUrl">` 或简写 `<img :src="imageUrl">`

- **`双花括号`**：文本插值  
  
- **`v-on`**：绑定事件监听器  
  示例：`<button v-on:click="greet">点击</button>` 或简写 `<button @click="greet">点击</button>`

