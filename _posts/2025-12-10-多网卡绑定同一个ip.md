---
layout: post
title: 多网卡绑定同一个ip
date: 2025-12-10 09:00:00 +0800
category: 笔记
thumbnail: /style/image/thumbnail.png
icon: note
typora-copy-images-to: ..\style\image
---

* 目录
{:toc}
### 一、在/etc/sysconfig/network-scripts  新建 ifcfg-bond0 文件

```shell
DEVICE=bond0
NAME=bond0
TYPE=Bond
IPADDR=192.168.1.49
NETMASK=255.255.255.0
GATEWAY=192.168.1.1
BOOTPROTO=none
ONBOOT=yes
BONDING_MASTER=yes
BONDING_OPTS="mode=1 miimon=100"
```

解释：
换了环境修改成对应的
	IPADDR: ip地址
	NETMASK：子网掩码
	GATEWAY：网关
	BONDING_OPTS中miimon：检测链路状况时间
mode bonding常用运行模式
	mode=0：平衡负载模式，有自动备援，但须要”Switch”支援及设定。网络

​	mode=1：自动备援模式，其中一条线若断线，其余线路将会自动备援。并发

​	mode=6：平衡负载模式，有自动备援，没必要”Switch”支援及设定。

### 二、修改网卡一 ifcfg-eth0和网卡二ifcfg-eth1

有就改没就加，master是新建ifcfg-bond0文件的DEVICE

```shell
BOOTPROTO=none
MASTER=bond0
SLAVE=yes
//注意一定要把网卡配置文件里的uuid删掉
```

### 三、重启服务

如果是第一次要加载一下bonding模块

```shell
//加载bonding模块
modprobe --first-time bonding
//重启网络服务
systemctl restart network
```

### 四、查看bonding 状态

```shell
cat /proc/net/bonding/bond0
//能看到2张网卡的信息
```

### 五、查看网卡信息

```
ifconfig
//看到bind0网卡有ip eth0和eth1没有ip
```

### 六、结语
