---
layout: post
title: vbox笔记
date: 2025-12-10 09:00:00 +0800
category: 笔记
thumbnail: /style/image/thumbnail.png
icon: note
typora-copy-images-to: ..\style\image
---

* 目录
{:toc}


# VirtualBox 虚拟机 CentOS 环境配置指南

本文将带你从零开始在 VirtualBox 中创建 CentOS 虚拟机，配置双网卡网络、安装图形界面、JDK 与常用工具，并通过 Xshell/Xftp 实现远程连接。

---

## 一、创建虚拟机并配置双网卡

### 1. 创建新虚拟机
- 打开 **VirtualBox**，点击「新建」。
- 操作系统类型选择 **Linux > Red Hat (64-bit)**（适用于 CentOS）。
- 分配足够内存（建议 ≥2GB）与磁盘空间（建议 ≥20GB）。

### 2. 配置双网卡
进入虚拟机「设置」→「网络」：
- **网卡1**：连接方式选择 **NAT**  
  → 用于虚拟机访问外网（如 yum 安装包）。
- **网卡2**：连接方式选择 **Host-Only Adapter**  
  → 用于宿主机（Windows/macOS）与虚拟机之间稳定通信。

> **提示**：确保 VirtualBox 的 Host-Only 网卡已启用（可在「工具 > 主机网络管理器」中查看或创建）。

### 3. 安装系统时启用网络
- 在 CentOS 安装过程中，进入「网络和主机名」设置，**启用 enp0s8 网卡**（对应 Host-Only 网卡）。
- 安装完成后，记录 `enp0s8` 分配的 IP 地址（如 `192.168.56.101`），该地址将用于后续 Xshell/Xftp 连接。

---

## 二、配置网络与远程连接

### 1. 安装网络工具
```bash
sudo yum install -y net-tools.x86_64
```
安装后即可使用 `ifconfig` 命令查看 IP。

### 2. 设置网卡开机自启
编辑 Host-Only 网卡配置文件：
```bash
sudo vi /etc/sysconfig/network-scripts/ifcfg-enp0s8
```

将：
```ini
ONBOOT=no
```
修改为：
```ini
ONBOOT=yes
```

保存后重启网络服务或直接重启系统：
```bash
sudo reboot
```

> 重启后 `ifconfig` 应能正常显示 `enp0s8` 的 IP。

### 3. 使用 Xshell 与 Xftp 连接
- 打开 **Xshell**，新建会话，协议选择 SSH，主机填入 `enp0s8` 的 IP 地址（如 `192.168.56.101`）。
- **Xftp** 可在同一会话中直接打开 SFTP 通道，用于文件传输。

---

## 三、安装图形界面（可选）

若安装 CentOS 时未选择图形界面，可手动安装：

### 1. 安装 X Window 与 GNOME
```bash
sudo yum groupinstall -y "X Window System"
sudo yum groupinstall -y "GNOME Desktop"
```

### 2. 设置默认启动模式
- 查看当前默认启动目标：
  ```bash
  systemctl get-default
  ```
  输出为 `multi-user.target`（命令行）或 `graphical.target`（图形界面）。

- 设置开机自动进入图形界面：
  ```bash
  sudo systemctl set-default graphical.target
  ```

- 如需切换回命令行模式：
  ```bash
  sudo systemctl set-default multi-user.target
  ```

> 修改后需 `reboot` 生效。

---

## 四、安装 JDK 与常用工具

### 1. 安装 OpenJDK 8
```bash
# 查看可用 JDK 版本
yum search java | grep jdk

# 安装 OpenJDK 8（无 GUI 的 headless 版本已包含基本运行环境）
sudo yum install -y java-1.8.0-openjdk
```

验证安装：
```bash
java -version
```

### 2. 安装 wget（用于下载文件）
```bash
sudo yum install -y wget
```

后续可通过 `wget` 下载 Tomcat、Maven 等工具，例如：
```bash
wget https://archive.apache.org/dist/tomcat/tomcat-9/v9.0.100/bin/apache-tomcat-9.0.100.tar.gz
```

---

## 五、小结

完成以上步骤后，你将拥有一个：
- 可通过 Xshell/Xftp 远程管理的 CentOS 虚拟机；
- 支持 NAT 上网 + Host-Only 固定 IP 的双网卡环境；
- 可选图形界面（GNOME）；
- 已配置 JDK 与基础工具链的开发/测试环境。

> **建议**：生产或学习环境推荐保持 `multi-user.target`（命令行模式），以节省资源；仅在需要 GUI 时临时启动图形界面（`startx`）。

